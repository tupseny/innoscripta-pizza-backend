(this["webpackJsonpinnoscripta-front"]=this["webpackJsonpinnoscripta-front"]||[]).push([[0],{102:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(36),c=a.n(l),o=(a(96),a(97),a(7)),i=a(120),s=a(128),u=a(79),m=a(119),d=a(129),f=n.createContext(null),b=n.createContext(null),v=n.createContext(null),p=n.createContext(null),g={dollar:{symbol:"$",name:"Dollar",prefix:!0},euro:{symbol:"\u20ac",name:"Euro",suffix:!0},rubble:{symbol:"\u20bd",name:"Rubble",suffix:!0}},E={dollar:{euro:{symbol:g.euro.symbol,rate:.9071},dollar:{symbol:g.dollar.symbol,rate:1},rubble:{symbol:g.rubble.symbol,rate:78.4579}}},h=function(e){var t=Object(n.useContext)(p)[0],a=e.children,l=t.currency;if(isNaN(a))return r.a.createElement("div",null,"NaN");var c=a;return c*=function(e){return t=e.symbol,Object.keys(E.dollar).reduce((function(e,a){var n=E.dollar[a];return n.symbol===t?n.rate:e>0?e:n.rate}),0);var t}(l),c=Math.round(c),c=l.prefix?l.symbol+c:c,c+=l.suffix?l.symbol:"",r.a.createElement("span",null,c)};var y=function(e){var t=e.timeout,a=Object(n.useContext)(b),l=Object(o.a)(a,2),c=l[0],i=l[1],s={right:"30%",left:"30%",bottom:"60%"};Object(n.useEffect)((function(){var e=setTimeout((function(){i({success:"",error:""})}),t);return function(){clearTimeout(e)}}));var u="text-center fixed-bottom alert",m=null;return c.error?(u+=" alert-danger",m=r.a.createElement("div",{style:s,className:u},c.error)):c.success&&(u+=" alert-success",m=r.a.createElement("div",{style:s,className:u},c.success)),m},O=a(29),j=(a(98),a(14)),k=a(15),N=a(46),x=a(47),w=a(56),C=function(e){return e.ok||console.error(e.statusText),e},S=function(){function e(){Object(j.a)(this,e)}return Object(k.a)(e,null,[{key:"_apiRequest",value:function(e,t,a,n,r){var l="/api"+e;this._request(l,t,a,n,r)}},{key:"_request",value:function(e,t,a,n,r){var l={Accept:"application/json"};a=a&&("string"===typeof a?a:JSON.stringify(a)),Object.assign(l,n);var c=Object(w.a)({method:t,headers:l},a&&{body:a}),o=fetch(e,c).then(C);r&&o.then(r.handle)}},{key:"getRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this._request(e,"GET",t,null,a)}},{key:"postRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n={"Content-Type":"application/json"};this._request(e,"POST",t,n,a)}},{key:"getApiRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this._apiRequest(e,"GET",t,null,a)}},{key:"postApiRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n={"Content-Type":"application/json"};this._apiRequest(e,"POST",t,n,a)}}]),e}(),T=function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,null,[{key:"fetchMenu",value:function(e){this.getApiRequest("/menu",null,e)}},{key:"fetchMeal",value:function(e,t){var a="/menu/"+e;this.getApiRequest(a,null,t)}}]),a}(S),P=a(117),q=a(118),R=a(127),_=a(81),I=a(125),A=a(123),D=function(){function e(){Object(j.a)(this,e)}return Object(k.a)(e,null,[{key:"address",value:function(e){return e.length>3}},{key:"phone",value:function(e){return!!e.match(/^[\s()+-]*?([0-9][\s()+-]*){6,20}$/)||0!==e.length}}]),e}(),L=function(e){var t=e.show,a=e.onClose,l=e.totalPrice,c=Object(n.useState)(""),i=Object(o.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(o.a)(m,2),f=d[0],b=d[1],v=Object(n.useState)(!1),p=Object(o.a)(v,2),g=p[0],E=p[1],y=Object(n.useState)(!1),O=Object(o.a)(y,2),j=O[0],k=O[1],N=function(e){e.persist();var t=e.target.value;D.address(t)?E(!0):E(!1),u(t)},x=function(e){e.persist();var t=e.target.value;D.phone(t)?k(!0):k(!1),b(t)};return r.a.createElement(A.a,{show:t,onHide:a},r.a.createElement(A.a.Header,{closeButton:!0},r.a.createElement(A.a.Title,{className:"text-center text-uppercase"},"Order details")),r.a.createElement(A.a.Body,null,r.a.createElement(I.a,null,r.a.createElement(P.a,{fluid:!0},r.a.createElement(I.a.Group,{controlId:"address"},r.a.createElement(I.a.Label,null,"Delivery address"),r.a.createElement(I.a.Control,{required:!0,type:"text",placeholder:"Enter your delivery address",value:s,onChange:N})),r.a.createElement(I.a.Group,{controlId:"phone"},r.a.createElement(I.a.Label,null,"Phone number"),r.a.createElement(I.a.Control,{required:!0,type:"text",placeholder:"Enter your phone number",value:f,onChange:x}),r.a.createElement(I.a.Text,null,"We will contact you when the order is completed")),r.a.createElement("div",{className:"d-flex justify-content-between py-3"},r.a.createElement("strong",{className:"text-muted"},"Total"),r.a.createElement("h5",{className:"font-weight-bold"},r.a.createElement(h,null,l)))))),r.a.createElement(A.a.Footer,null,r.a.createElement(_.a,{variant:"primary",onClick:a,name:"order",disabled:!(g&&j),className:""},"Make an order"),r.a.createElement(_.a,{variant:"outline-secondary",onClick:a,name:"cancel",className:""},"Close")))},z=function(){function e(){Object(j.a)(this,e)}return Object(k.a)(e,null,[{key:"getUserBytToken",value:function(e,t){var a="/user?api_token="+e;S.getApiRequest(a,null,t)}},{key:"fetchOrders",value:function(e,t){var a="/user/orders?api_token="+e;S.getApiRequest(a,null,t)}}]),e}(),B=function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,null,[{key:"register",value:function(e,t){this.postApiRequest("/register",e,t)}},{key:"authenticate",value:function(e,t){this.postApiRequest("/login",e,t)}},{key:"saveToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token"),this.postApiRequest("/logout")}}]),a}(S),H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};Object(j.a)(this,e),this.errorCallback=a,this.callback=t,this.handle=this.handle.bind(this)}return Object(k.a)(e,[{key:"handle",value:function(e){var t=this;if(e.ok)e.json().then(this.callback);else{var a=e.status,n=e.statusText;e.json().then((function(e){(null===e||void 0===e?void 0:e.errors)&&(n=e.errors),t.errorCallback({code:a,message:n})}))}}}]),e}(),J=function(e){Object(x.a)(a,e);var t=Object(N.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(k.a)(a,null,[{key:"makeOrder",value:function(e,t){B.getToken()?z.getUserBytToken(B.getToken(),new H((function(n){var r=n;if(null===r||void 0===r?void 0:r.api_token){console.log(r);var l={api_token:r.api_token,items:e};S.postApiRequest("/user/orders",l,t)}else a.makeAnonOrder(e,t)}))):a.makeAnonOrder(e,t)}},{key:"makeAnonOrder",value:function(e,t){this.postApiRequest("/order/anon",e,t)}}]),a}(S),U=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(o.a)(c,2),s=i[0],u=i[1],m=Object(n.useContext)(f),d=Object(o.a)(m,2),v=d[0],p=d[1],g=Object(n.useContext)(b)[1],E=v.cart.reduce((function(e,t){return e+t.price}),0),h=Object(n.useRef)();Object(n.useEffect)((function(){return h.current=!0,function(){h.current=!1}}),[]);return r.a.createElement("div",null,r.a.createElement(F,{onSubmitClickHandler:function(e){e.preventDefault(),l(!0),u(!0)},isLoading:a,cartContext:v,cartDispatch:p,total:E}),r.a.createElement(L,{show:s,onClose:function(e){if(h.current){var t;e&&(e.persist(),t=e.target.name);"order"===t?J.makeOrder(v.cart,new H((function(e){console.log(e),p({type:W.clean}),g({success:"You order is cooking now..."}),l(!1)}))):l(!1),u(!1)}},totalPrice:E+5}))},F=function(e){var t=e.onSubmitClickHandler,a=e.isLoading,n=e.cartContext,l=e.cartDispatch,c=e.total,o=function(e){l({type:W.remove,item:{id:e}})};return r.a.createElement(P.a,{className:"my-3"},n.cart.length>0?r.a.createElement("div",null,r.a.createElement(M,{items:n.cart,onDelete:o}),r.a.createElement(V,{total:c,deliveryFee:5,onClickHandler:t,isLoading:a})):r.a.createElement("h1",{className:"display-4 text-center"},"There are no items in cart"))},M=function(e){var t=e.items,a=e.onDelete,n=function(e){var t=e.image,a=e.name,n=e.category,l=e.price,c=e.amount,o=e.id,i=e.onDeleteHandler;return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row",className:"border-0"},r.a.createElement("div",{className:"p-2"},r.a.createElement("img",{src:t,alt:"",width:"70",className:"img-fluid rounded shadow-sm"}),r.a.createElement("div",{className:"ml-3 d-inline-block align-middle"},r.a.createElement("h5",{className:"mb-0 text-dark d-inline-block align-middle"},a),r.a.createElement("span",{className:"text-muted font-weight-normal font-italic d-block"},n&&"Category: "+n)))),r.a.createElement("td",{className:"border-0 align-middle"},r.a.createElement("strong",null,r.a.createElement(h,null,l))),r.a.createElement("td",{className:"border-0 align-middle"},r.a.createElement("strong",null,c)),r.a.createElement("td",{className:"border-0 align-middle"},r.a.createElement("button",{onClick:function(){return i(o)},className:"icon-btn"},r.a.createElement(O.e,null)))))};return r.a.createElement("div",{className:"table-responsive"},r.a.createElement(q.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"border-0 bg-light"},r.a.createElement("div",{className:"p-2 px-3 text-uppercase"},"Product")),r.a.createElement("th",{scope:"col",className:"border-0 bg-light"},r.a.createElement("div",{className:"py-2 text-uppercase"},"Price")),r.a.createElement("th",{scope:"col",className:"border-0 bg-light"},r.a.createElement("div",{className:"py-2 text-uppercase"},"Quantity")),r.a.createElement("th",{scope:"col",className:"border-0 bg-light"},r.a.createElement("div",{className:"py-2 text-uppercase"},"Remove")))),t.map((function(e){return r.a.createElement(n,{image:e.image,name:e.name,category:e.category,price:e.price,amount:e.amount,key:e.id,id:e.id,onDeleteHandler:a})}))))},V=function(e){var t=e.total,a=e.deliveryFee,n=e.onClickHandler,l=e.isLoading;return r.a.createElement(m.a,{className:"py-5 p-4 bg-white rounded shadow-sm"},r.a.createElement(u.a,{id:"order-summary"},r.a.createElement("div",{className:"p-4"},r.a.createElement(R.a,{className:"mb-4"},r.a.createElement(R.a.Item,{className:"d-flex justify-content-between py-3 border-bottom"},r.a.createElement("strong",{className:"text-muted"},"Order Subtotal"),r.a.createElement("strong",null,r.a.createElement(h,null,t))),r.a.createElement(R.a.Item,{className:"d-flex justify-content-between py-3 border-bottom"},r.a.createElement("strong",{className:"text-muted"},"Delivery cost"),r.a.createElement("strong",null,r.a.createElement(h,null,a))),r.a.createElement(R.a.Item,{className:"d-flex justify-content-between py-3 border-bottom"},r.a.createElement("strong",{className:"text-muted"},"Total"),r.a.createElement("h5",{className:"font-weight-bold"},r.a.createElement(h,null,t+a)))),r.a.createElement(_.a,{onClick:n,disabled:l,block:!0,variant:"danger"},l?r.a.createElement(i.a,{animation:"grow",variant:"warning"}):"Procceed to checkout"))))},G=function(){var e=JSON.parse(localStorage.getItem("cart"));return e||(e={cart:[]}),e},W={updateAmount:"UPDATE",remove:"REMOVE",clean:"CLEAN"},Y=function(e,t){var a=e.cart,n=[];switch(t.type){case W.updateAmount:n=r({cart:Z(t.item,a)});break;case W.remove:n=r({cart:$(t.item.id,a)});break;case W.clean:n={cart:[]};break;default:throw new Error("Not allowed action")}return function(e){localStorage.setItem("cart",JSON.stringify(e))}(n),n;function r(t){var a=Object.assign({},e);return Object.assign(a,t)}};function $(e,t){return t.filter((function(t){return t.id!==e}))}function Z(e,t){var a=e.id,n=e.amount,r=t.findIndex((function(e){return e.id===a}));return r>-1?n>0?t[r].amount=n:t.splice(r,1):t.push(e),t}var Q=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],m=s[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("menu-groups"));Object.keys(e).length>0&&(l(e),m(!0))}),[]),Object(n.useEffect)((function(){var e=!0;return T.fetchMenu(new H((function(t){e&&(l(t),m(!0),localStorage.setItem("menu-groups",JSON.stringify(t)))}))),function(){e=!1}}),[]);return u?a?a.map((function(e){return r.a.createElement(K,{key:e.id,id:e.id,title:e.name})})):null:r.a.createElement(i.a,{className:"m-auto mt-5",animation:"border",variant:"warning"})},K=function(e){var t=e.title,a=e.id,l=Object(n.useState)([]),c=Object(o.a)(l,2),i=c[0],m=c[1],d=Object(n.useState)(!0),f=Object(o.a)(d,2),b=f[0],v=f[1];Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("group-items_"+a));e&&Object.keys(e).length>0&&(m(e),v(!1))}),[a]),Object(n.useEffect)((function(){var e=!0;return T.fetchMeal(a,new H((function(t){e&&(v(!1),m(t),localStorage.setItem("group-items_"+a,JSON.stringify(t)))}))),function(){e=!1}}),[a]);return r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(u.a,null,r.a.createElement(X,{name:t})),r.a.createElement(u.a,null,b?r.a.createElement(s.a,{variant:"warning",animated:!0,now:100}):i?r.a.createElement(ee,{category:t,items:i}):null))},X=function(e){var t=e.name;return r.a.createElement(m.a,null,r.a.createElement(u.a,{className:"menu-category-container text-uppercase text-center text-danger"},r.a.createElement("h1",null,t)))},ee=function(e){var t=e.items,a=e.category;return t?r.a.createElement(m.a,null,t.map((function(e){return r.a.createElement(u.a,{xs:4,className:"menu-item-container",key:e.id},r.a.createElement(te,{image:a.toLowerCase()+"_"+e.name.toLowerCase()+".png",category:a,id:e.id,name:e.name,price:e.price}))}))):null},te=function(e){var t=e.name,a=e.image,l=e.price,c=e.id,i=e.category,s=Object(n.useState)(0),b=Object(o.a)(s,2),v=b[0],p=b[1],g=Object(n.useState)(!1),E=Object(o.a)(g,2),y=E[0],j=E[1],k=Object(n.useContext)(f),N=Object(o.a)(k,2),x=N[0],w=N[1];Object(n.useEffect)((function(){var e=x.cart;if(e){var t=e.find((function(e){return e.id===c}));if(t){var a=t.amount;p(a),a>0&&j(!0)}}}),[]);var C=function(e){w({type:W.updateAmount,item:{id:c,name:t,price:l,amount:e,category:i}})},S=function(e){e.preventDefault();var t=!y;j(t);var a=t?1:0;p(a),C(a)};return r.a.createElement(d.a,{className:"menu-item d-flex flex-column align-items-center"},r.a.createElement(d.a.Img,{loading:"lazy",src:"static/img/"+a,width:"300px"}),r.a.createElement(d.a.Body,{className:"w-100"},r.a.createElement(m.a,{className:"d-flex align-items-end"},r.a.createElement(u.a,{className:"text-uppercase text-left px-0"},r.a.createElement("h5",null,t)),r.a.createElement(m.a,{className:"d-flex align-items-baseline"},r.a.createElement(u.a,{className:"text-center text-dark price-container"},r.a.createElement(h,null,l)),r.a.createElement(u.a,{className:"text-right d-flex flex-row align-items-end"},r.a.createElement("button",{className:"add-btn text-center text-danger icon-btn",onClick:S},y?r.a.createElement(O.d,null):r.a.createElement(O.c,null)),r.a.createElement("input",{className:"meal-amount border-success text-center",type:"number",min:0,onChange:function(e){e.preventDefault();var t=e.target.value,a=t||0;j(a>0),p(a),C(a)},value:v}))))))},ae=function(){return r.a.createElement(P.a,{id:"menu-section"},r.a.createElement(Q,null))},ne=a(126),re=a(121),le=a(124),ce=(a(102),"Pizza"),oe={logo:"static/img/pizza-logo.svg",header:""},ie={menu:"/menu",home:"/home",login:"/login",signup:"/signup",cart:"/cart",history:"/history"},se=a(35),ue=a.n(se),me=a(28),de=function(){return{currency:g.dollar}},fe="UPDATE",be=function(e,t){var a={};switch(t.type){case fe:a={currency:t.item};break;default:throw new Error("Not allowed action")}return a},ve=function(){var e=Object(n.useContext)(v),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(p),i=Object(o.a)(c,2),s=i[0],u=i[1],m=B.getToken(),d={brand:{name:ce,logo:oe.logo},nav:{menu:{name:"menu",href:ie.menu},home:{name:"home",href:ie.home},cart:{name:"cart",href:ie.cart},login:{name:"Log in",href:ie.login},signup:{name:"Sign up",href:ie.signup},signout:{name:"Sign Out"},history:{name:"History",href:ie.history},currency:{name:"Currency",values:[g.euro,g.dollar,g.rubble]}}},f=function(){l({}),B.logout()},b=function(e,t){t&&t.persist();var a=t.target.name;Object.keys(g).forEach((function(e){g[e].symbol===a&&u({type:fe,item:g[e]})}))};return r.a.createElement(ne.a,{expand:"md",className:"navbar-main"},r.a.createElement(ne.a.Brand,{href:d.nav.home.href},r.a.createElement("img",{alt:"",id:"logo",className:"d-inline-block align-top",src:d.brand.logo,width:"30",height:"30"})," ",d.brand.name),r.a.createElement(ne.a.Toggle,{"ariac-controls":"navbar-nav"}),r.a.createElement(ne.a.Collapse,{id:"navbar-nav"},r.a.createElement(re.a,{className:"mr-auto text-uppercase"},r.a.createElement(me.c,{className:"nav-link",to:d.nav.home.href},d.nav.home.name),r.a.createElement(me.c,{className:"nav-link",to:d.nav.menu.href}," ",d.nav.menu.name)),r.a.createElement(re.a,null,r.a.createElement(le.a,{onSelect:b,title:s.currency.symbol,id:"currency-dropdown"},d.nav.currency.values.map((function(e,t){return r.a.createElement(le.a.Item,{key:t,name:e.symbol},e.symbol+" - "+e.name)}))),r.a.createElement(me.c,{className:"nav-link text-uppercase",to:d.nav.cart.href}," ",d.nav.cart.name),a.api_token||m?r.a.createElement(r.a.Fragment,null,r.a.createElement(me.c,{to:d.nav.history.href,className:"nav-link text-uppercase mr-3"},d.nav.history.name),r.a.createElement(_.a,{className:"signout",onClick:f},d.nav.signout.name)):r.a.createElement(r.a.Fragment,null,r.a.createElement(me.c,{to:d.nav.login.href,className:"login nav-link"},d.nav.login.name),r.a.createElement(me.c,{to:d.nav.signup.href,className:"signup nav-link"},d.nav.signup.name)))))};ue()(document).ready((function(){var e=ie.home;ue()(window).scroll((function(){var t=window.location.pathname,a=ue()(window).scrollTop();t===e&&a<420?(ue()(".navbar-tiny").removeClass("navbar-tiny"),ue()(".navbar-main").addClass("navbar-transporent")):(ue()(".navbar-main").removeClass("navbar-transporent"),ue()(".navbar-main").addClass("navbar-tiny"))}))}));var pe=function(e){var t=Object(n.useState)({success:"",error:""}),a=Object(n.useReducer)(Y,void 0,G),l=Object(n.useState)({}),c=Object(n.useReducer)(be,void 0,de);return r.a.createElement(f.Provider,{value:a},r.a.createElement(b.Provider,{value:t},r.a.createElement(v.Provider,{value:l},r.a.createElement(p.Provider,{value:c},e.children))))},ge=(a(107),a(77)),Ee=a(78),he=a(57),ye=function(e,t){var a=Object(n.useState)({}),r=Object(o.a)(a,2),l=r[0],c=r[1],i=Object(n.useState)({}),s=Object(o.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(!1),f=Object(o.a)(d,2),b=f[0],v=f[1];return Object(n.useEffect)((function(){0===Object.keys(u).length&&b&&e(l)}),[u]),{handleChange:function(e){e.persist(),c((function(t){return Object(w.a)({},t,Object(he.a)({},e.target.name,e.target.value))}))},handleSubmit:function(e){e&&e.preventDefault(),m(t.validate(l)),v(!0)},values:l,errors:u}},Oe=function(){function e(){Object(j.a)(this,e)}return Object(k.a)(e,null,[{key:"validate",value:function(e){var t={};return e.password!=e.rePassword&&(t.rePassword="Passwords don't match"),t}}]),e}(),je=function(){var e=Object(n.useContext)(b)[1],t=Object(n.useState)(!1),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useRef)();Object(n.useEffect)((function(){return i.current=!0,function(){i.current=!1}}),[]);return r.a.createElement(ke,{loginUrl:ie.login,handleRegister:function(t){if(i.current){c(!0);var a={email:t.email,password:t.password};B.register(a,new H((function(t){c(!1),t.api_token&&(B.saveToken(t.api_token),e({success:"Successfully registered!"}))}),(function(t){Object.keys(t.message).forEach((function(a){e({error:t.message[a][0]})})),c(!1)})))}},loading:l})},ke=function(e){var t=e.loginUrl,a=e.handleRegister,l=e.loading,c=Object(n.useState)(!1),s=Object(o.a)(c,2),u=s[0],m=s[1],d=ye(a,Oe),f=d.errors,b=d.values,v=d.handleChange,p=d.handleSubmit;return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"form-container"},r.a.createElement("div",{className:"illustration"},r.a.createElement(O.b,null)),r.a.createElement(I.a,{noValidate:!0,validated:u,method:"post",onSubmit:function(e){e.preventDefault(),e.currentTarget.checkValidity()&&p(e),m(!0)}},r.a.createElement("input",{autoComplete:"false",name:"hidden",type:"text",style:{display:"none"}}),r.a.createElement("h2",{className:"text-center"},"Create an account"),r.a.createElement(ge.a,{controlId:"email"},r.a.createElement(I.a.Control,{onChange:v,required:!0,type:"email",name:"email",placeholder:"Email"})),r.a.createElement(ge.a,{controlId:"password"},r.a.createElement(I.a.Control,{onChange:v,required:!0,type:"password",name:"password",placeholder:"Password"})),r.a.createElement(ge.a,{controlId:"password-repeat"},r.a.createElement(I.a.Control,{onChange:v,required:!0,type:"password",name:"rePassword",placeholder:"Password (repeat)",value:b.rePassword||"",className:f.rePassword?"is-invalid":"is-valid"}),r.a.createElement(Ee.a.Feedback,{type:"invalid",style:{display:f.rePassword?"block":"none"}},"Passwords don't match")),r.a.createElement(ge.a,null,r.a.createElement(_.a,{block:!0,type:"submit",disabled:l},l?r.a.createElement(i.a,{animation:"grow",variant:"warning"}):"Sign Up")),r.a.createElement("a",{className:"already",href:t},"You already have an account? Login here."))))},Ne=(a(108),function(){function e(){Object(j.a)(this,e)}return Object(k.a)(e,null,[{key:"validate",value:function(e){return{}}}]),e}()),xe=a(13),we=function(){var e=Object(n.useContext)(b)[1],t=Object(n.useContext)(v),a=Object(o.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(!1),s=Object(o.a)(i,2),u=s[0],m=s[1];if(l.api_token)return r.a.createElement(xe.a,{to:"home"});return r.a.createElement(Ce,{handleLogin:function(t){var a={email:t.email,password:t.password};m(!0);B.authenticate(a,new H((function(t){var a=t.user;m(!1),console.log(a),(null===a||void 0===a?void 0:a.api_token)?(B.saveToken(a.api_token),c(a),e({success:"Successfully logged in"})):e({error:"Bad credentials"})}),(function(){e({error:"Unknown error"}),m(!1)})))},loading:u})},Ce=function(e){var t=e.handleLogin,a=e.loading,l=ye(t,Ne),c=l.values,s=l.handleChange,u=l.handleSubmit,m=Object(n.useState)(!1),d=Object(o.a)(m,2),f=d[0],b=d[1];return r.a.createElement("div",{className:"login-form-container"},r.a.createElement(I.a,{noValidate:!0,validated:f,method:"post",onSubmit:function(e){e.preventDefault(),e.currentTarget.checkValidity()&&u(e),b(!0)}},r.a.createElement("div",{className:"illustration"},r.a.createElement(O.a,null)),r.a.createElement(ge.a,null,r.a.createElement(I.a.Control,{required:!0,onChange:s,value:c.email||"",type:"email",name:"email",placeholder:"Email"})),r.a.createElement(ge.a,null,r.a.createElement(I.a.Control,{required:!0,onChange:s,value:c.password||"",type:"password",name:"password",placeholder:"Password"})),r.a.createElement(ge.a,null,r.a.createElement(_.a,{block:!0,disabled:a,type:"submit"},a?r.a.createElement(i.a,{animation:"grow",variant:"warning"}):"Log in"))))},Se=function(){return r.a.createElement(Te,null)},Te=function(){var e=Object(n.useContext)(v),t=Object(o.a)(e,2),a=t[0],r=t[1];if(null!==B.getToken()&&0===Object.keys(a).length){z.getUserBytToken(B.getToken(),new H((function(e){(null===e||void 0===e?void 0:e.api_token)?r(e):B.logout()})))}return null},Pe=(a(109),function(){return r.a.createElement("div",{className:"footer-basic"},r.a.createElement("footer",null,r.a.createElement("p",{className:"copyright"},"PIZZA \xa9 2020")))}),qe=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!0),s=Object(o.a)(c,2),u=s[0],m=s[1],d=Object(n.useContext)(v),f=Object(o.a)(d,2),p=f[0],g=f[1],E=Object(n.useContext)(b)[1];return Object(n.useEffect)((function(){var e=!0;return p.api_token?z.fetchOrders(p.api_token,new H((function(t){e&&(l(t),m(!1),console.log(t))}),(function(t){e&&(401===t.code&&(g({}),B.logout(),E({error:"Don' have permissions"}),l([])),m(!1))}))):l([]),function(){e=!1}}),[p]),Object.keys(p).length>0?r.a.createElement(P.a,{className:"mx-5 my-3"},u?r.a.createElement(i.a,{className:"d-flex justify-content-center",animation:"border",variant:"warning"}):r.a.createElement(q.a,{borderless:!0},r.a.createElement("tbody",null,a?a.map((function(e,t){return r.a.createElement(Re,{key:t,id:t+1,items:e})})):r.a.createElement("h1",{className:"display-1"},"You don\\'t have any orders")))):r.a.createElement(xe.a,{to:ie.login})},Re=function(e){var t=e.id,a=e.items,n=function(e){var t=e.name,a=e.price,n=e.amount;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h4",null,t)),r.a.createElement("td",{className:"text-center"},r.a.createElement(h,null,a)),r.a.createElement("td",{className:"text-center"},n))};return r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("h1",null,t,"#")),r.a.createElement("td",null,r.a.createElement(q.a,{responsive:!0,size:"sm"},r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement(n,{name:e.name,price:e.price,amount:e.amount})}))))))},_e=(a(110),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,{image:"header-background.jpeg"}),r.a.createElement(ae,null))}),Ie=function(e){var t=e.image;return r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"header-blue",style:{backgroundImage:"url(static/img/"+t+")",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"left"}},r.a.createElement("div",{className:"container hero"},r.a.createElement(m.a,null,r.a.createElement(u.a,{className:"text-center"},r.a.createElement("h1",{className:"display-2 text-uppercase text-center pulse animated"},"Welcome to PizzaStore"))),r.a.createElement(m.a,{className:"justify-content-md-center bounce animated hero-btn-group"},r.a.createElement(u.a,{xs:12,lg:6,xl:5,className:"text-center"},r.a.createElement("a",{href:"#menu-section",className:"btn btn-warning btn-block text-uppercase text-center text-dark border rounded border-primary bounce animated infinite"},"show me pizza")),r.a.createElement(u.a,{xs:12,lg:6,xl:5,className:"text-center"},r.a.createElement(me.b,{to:ie.login,className:"btn btn-outline-warning btn-block text-uppercase text-center"},"log in"))))))};var Ae=function(){return r.a.createElement(me.a,null,r.a.createElement(pe,null,r.a.createElement(Se,null),r.a.createElement(ve,null),r.a.createElement(xe.b,{path:ie.home,component:_e}),r.a.createElement(xe.b,{path:ie.menu,component:ae}),r.a.createElement(xe.b,{path:ie.login,component:we}),r.a.createElement(xe.b,{path:ie.signup,component:je}),r.a.createElement(xe.b,{path:ie.cart,component:U}),r.a.createElement(xe.b,{path:ie.history,component:qe}),r.a.createElement(xe.a,{to:"/home",from:"/"}),r.a.createElement(y,{timeout:3e3}),r.a.createElement(Pe,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,a){e.exports=a(111)},97:function(e,t,a){},98:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.6653370a.chunk.js.map